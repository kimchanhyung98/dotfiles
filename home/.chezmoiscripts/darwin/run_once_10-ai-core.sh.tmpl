#!/bin/bash
#
# AI Core: gemini CLI, SuperGemini, ollama
# Runs once on first setup

{{ if ne .chezmoi.os "darwin" }}
exit 0
{{ end }}

set -eufo pipefail

echo "[ai-core]"

# gemini CLI
# - Google Gemini 터미널 AI 도우미
if ! command -v gemini &>/dev/null; then
    echo "Installing gemini CLI..."
    npm install -g @google/gemini-cli
else
    echo "gemini CLI: already installed ($(gemini --version 2>/dev/null || echo 'installed'))"
fi

# SuperGemini
# - Gemini CLI 확장 프레임워크
if ! command -v supergemini &>/dev/null; then
    echo "Installing SuperGemini..."
    pipx install supergemini
else
    echo "SuperGemini: already installed"
fi

# ollama
# - 로컬 LLM 실행 엔진 (Brewfile에서 설치, 여기서는 확인만)
if command -v ollama &>/dev/null; then
    echo "ollama: already installed ($(ollama --version 2>/dev/null || echo 'installed'))"
else
    echo "Warning: ollama not found. It should be installed via Brewfile."
fi

echo "[ai-core] done"
