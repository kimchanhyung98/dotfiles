#!/bin/bash
#
# AI Claude: SuperClaude, peon-ping

{{ if ne .chezmoi.os "darwin" }}
exit 0
{{ end }}

set -eufo pipefail

echo "[ai-claude]"

# SuperClaude
# - Claude Code 확장 프레임워크 (페르소나, 명령어, 플래그 시스템)
if ! command -v superclaude &>/dev/null; then
    echo "Installing SuperClaude..."
    pipx install superclaude || echo "[ai-claude][warning] SuperClaude installation failed"
else
    echo "SuperClaude: already installed"
fi

# peon-ping
# - 작업 완료 알림 사운드 (임시파일 다운로드 후 실행)
if [ ! -d "$HOME/.claude/hooks/peon-ping" ]; then
    echo "Installing peon-ping..."
    installer=$(mktemp)
    if curl -fsSL https://raw.githubusercontent.com/PeonPing/peon-ping/main/install.sh -o "$installer" 2>/dev/null; then
        bash "$installer" -- --packs=hal_2001,protoss,sc_marine,sc_scv || echo "[ai-claude][warning] peon-ping installation failed"
        rm -f "$installer"
    else
        rm -f "$installer"
        echo "[ai-claude][warning] peon-ping download failed"
    fi
else
    echo "peon-ping: already installed"
fi

echo "[ai-claude] done"
