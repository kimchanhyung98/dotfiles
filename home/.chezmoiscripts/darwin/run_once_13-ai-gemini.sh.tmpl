#!/bin/bash
#
# AI Gemini: SuperGemini, superpowers (copy)

{{ if ne .chezmoi.os "darwin" }}
exit 0
{{ end }}

set -eufo pipefail

echo "[ai-gemini]"

# SuperGemini
# - Gemini CLI 확장 프레임워크 (슬래시 명령어, AI 에이전트 페르소나)
if ! command -v supergemini &>/dev/null; then
    echo "Installing SuperGemini..."
    pipx install supergemini || echo "[ai-gemini][warning] SuperGemini installation failed"
    SuperGemini install --force --yes || true
else
    echo "SuperGemini: already installed"
fi

# superpowers for Gemini
# - ~/superpowers에서 Gemini 스킬 경로로 복사 (개별 커스텀 가능)
GEMINI_SKILLS_DIR="$HOME/.gemini/skills/superpowers"

if [ -d "$HOME/superpowers/skills" ] && [ ! -d "$GEMINI_SKILLS_DIR" ]; then
    echo "Copying superpowers to Gemini skills..."
    mkdir -p "$(dirname "$GEMINI_SKILLS_DIR")"
    cp -r "$HOME/superpowers/skills" "$GEMINI_SKILLS_DIR"
fi

echo "[ai-gemini] done"
