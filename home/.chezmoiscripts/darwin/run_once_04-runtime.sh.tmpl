#!/bin/bash
#
# Runtime: Bun (JavaScript/TypeScript)

{{ if ne .chezmoi.os "darwin" }}
exit 0
{{ end }}

set -eufo pipefail

echo "[runtime]"

# Bun
# - JavaScript/TypeScript 런타임 설치 (임시파일 다운로드 후 실행)
if ! command -v bun &>/dev/null; then
    echo "Installing Bun..."
    installer=$(mktemp)
    if curl -fsSL https://bun.sh/install -o "$installer"; then
        bash "$installer" || echo "[runtime][warning] Bun installation failed"
        rm -f "$installer"
    else
        rm -f "$installer"
        echo "[runtime][warning] Bun download failed"
    fi
else
    echo "Bun: already installed ($(bun --version))"
fi

echo "[runtime] done"
