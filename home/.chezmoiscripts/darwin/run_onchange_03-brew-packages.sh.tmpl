#!/bin/bash
#
# Install/sync Homebrew packages from Brewfile
# Re-runs when Brewfile content changes
#
# Brewfile hash: {{ include "Brewfile" | sha256sum }}

{{ if ne .chezmoi.os "darwin" }}
exit 0
{{ end }}

set -eufo pipefail

echo "=== Brew Packages ==="

{{ $homebrewPrefix := .homebrewPrefix }}
eval "$({{ $homebrewPrefix }}/bin/brew shellenv)"

brew bundle --file="{{ .chezmoi.sourceDir }}/Brewfile" --no-lock

echo "=== Brew Packages complete ==="
