#!/bin/bash
# {{ template "scripts-library" }}
#
# Install zerobrew (macOS only)
# Runs once on first setup

{{ if ne .chezmoi.os "darwin" }}
exit 0
{{ end }}

set -eufo pipefail

echo "Checking zerobrew installation..."

if ! command -v zb &>/dev/null; then
    echo "Installing zerobrew..."
    curl -fsSL https://zerobrew.rs/install | bash

    # Configure shell environment for zerobrew
    {{ if .isAppleSilicon }}
    eval "$(/opt/zerobrew/bin/zb shellenv)"
    {{ else }}
    eval "$(/usr/local/zerobrew/bin/zb shellenv)"
    {{ end }}
else
    echo "zerobrew is already installed."
fi
